const svgFilters=document.createElementNS("http://www.w3.org/2000/svg","svg");["width","height"].forEach((e=>svgFilters.setAttribute(e,"0"))),svgFilters.innerHTML='<defs>\n<filter id="dist">\n  <feTurbulence id="feturb" type="turbulence" baseFrequency="0.01" numOctaves="2" result="turbulence"/>\n  <feDisplacementMap in2="turbulence" in="SourceGraphic"\n    scale="50" xChannelSelector="R" yChannelSelector="G"/>\n</filter>\n<filter id="dist-0">\n  <feTurbulence id="turbulence" baseFrequency="0.05" numOctaves="3" result="noise" seed="5"/>\n  <feDisplacementMap id="displacement" in="SourceGraphic" in2="noise" scale="50" xChannelSelector="R" yChannelSelector="R"/>\n</filter>\n<filter id="dist-1">\n  <feTurbulence id="turbulence" baseFrequency="0.08" numOctaves="2" result="noise" seed="1"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="8"xChannelSelector="R" yChannelSelector="R" />\n</filter>\n\n<filter id="dist-2">\n  <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="8"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="15" xChannelSelector="R" yChannelSelector="R"/>\n</filter>\n<filter id="dist-3">\n  <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="3" result="noise" seed="3"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="8" xChannelSelector="R" yChannelSelector="R"/>\n</filter>\n\n<filter id="dist-4">\n  <feTurbulence id="turbulence" baseFrequency="0.02" numOctaves="5" result="noise" seed="90"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="-16" xChannelSelector="R" yChannelSelector="R"/>\n</filter>\n<filter id="dist-5">\n  <feTurbulence id="turbulence" baseFrequency="0.001" numOctaves="2" result="noise" seed="5"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="-16" xChannelSelector="B" yChannelSelector="B"/>\n</filter>\n<filter id="dist-6">\n  <feTurbulence id="turbulence" baseFrequency="0.0002" numOctaves="8" result="noise" seed="15"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="10" xChannelSelector="B" yChannelSelector="B"/>\n</filter>\n<filter id="dist-7">\n  <feTurbulence id="turbulence" baseFrequency="0.002" numOctaves="25" result="noise" seed="40"/>\n  <feDisplacementMap in="SourceGraphic" in2="noise" scale="-12" xChannelSelector="B" yChannelSelector="B"/>\n</filter>\n</defs>',document.body.appendChild(svgFilters);const makeElement=(e,t={},n)=>{const a=document.createElement(e);return"string"==typeof t?a.textContent=t:(Object.entries(t).map((([e,t])=>a[e]=t)),n&&(a.textContent=n)),a},makeIcon=(e,t,n)=>{const a=document.createElementNS("http://www.w3.org/2000/svg","svg");return Array.isArray(t)||(t=[t]),t.forEach((e=>{if("string"==typeof e){const t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d",e),a.appendChild(t)}})),Object.entries(n).forEach((([e,t])=>a.setAttribute(e,t))),e.appendChild(a),e};!function(){const e=window.location.pathname;if(e&&"/"!==e&&"/"===e.charAt(e.length-1)){const t=e.slice(0,window.location.pathname.length-1);history.replaceState(history.state,t,t)}}();const hideTargetElement=e=>{"vanish"===e.animationName.slice(0,6)&&(e.target.style.visibility="hidden")},showTargetElement=e=>{"appear"===e.animationName.slice(0,6)&&(e.target.style.visibility="visible")};document.body.addEventListener("animationstart",showTargetElement),document.body.addEventListener("animationend",hideTargetElement),document.body.addEventListener("webkitAnimationEnd",hideTargetElement);const makeAnimDurations=(e,{tMin:t=800,tMax:n=2e3,random:a=!1}={})=>{let i=[];for(let r=0;r<e.length;r++)i.push(a?Math.random()*(n-t)+t:r*(n-t)/e.length+t);return i},makeVanisher=(e,t,n)=>{const a=Array.isArray(e)?e:[e],i=t,r=makeAnimDurations(a,n),o=n?.timingFunction??"cubic-bezier(0.165, 0.84, 0.44, 1)",l=`${n?.delay??0}ms`;let s;return a.map((e=>(e=>{const n=document.createElement("span");n.classList.add("mask"),e.style.visibility="hidden",t.style.pointerEvents="none",n.appendChild(e),i.appendChild(n)})(e))),{el:i,appear:e=>{s&&clearTimeout(s),a.map(((t,n)=>{t.style.animation=`${"BOTTOM"===e?"appearToBottom":"appearToTop"} ${r[n]}ms ${o} ${l}`})),s=setTimeout((()=>i.style.pointerEvents="all"),.6*r[r.length-1])},vanish:e=>{clearTimeout(s),a.map(((t,n)=>{t.style.animation=`${"BOTTOM"===e?"vanishToBottom":"vanishToTop"} ${r[n]}ms ${o} 0ms`,n===a.length-1&&(i.style.pointerEvents="none")}))}}},makeVanisherDisplay=(e,t,n)=>{const a=e.map((e=>makeElement("span",e))),i=t,r=makeAnimDurations(a,n),o="cubic-bezier(0.165, 0.84, 0.44, 1)";return a.map((e=>(e=>{const t=document.createElement("span");t.classList.add("mask"),e.style.visibility="hidden",a.map(((e,t)=>{" "===e.textContent&&(e.style.marginRight="1ch")})),t.style.justifyContent="center",t.appendChild(e),i.appendChild(t)})(e))),{el:i,appear:e=>a.map(((t,n)=>t.style.animation=`${"LEFT"===e?"appearToLeft":"appearToRight"} ${r[n]}ms ${o}`)),vanish:e=>a.map(((t,n)=>t.style.animation=`${"LEFT"===e?"vanishToLeft":"vanishToRight"} ${r[n]+800}ms ${o}`))}},App=function e(){const t={currentId:-1};let n=makeVanisher(makeElement("p","← Scroll / swipe →"),makeElement("div",{id:"hint"}));const a=makeElement("a",{href:"/about"},"About"),i=makeVanisher(a,makeElement("div",{id:"aboutLinkWrapper"}),{tMin:900}),r=makeElement("a",{href:"/"},"Works"),o=makeVanisher(r,makeElement("div",{id:"aboutBackWrapper"}),{tMin:900}),l=[makeElement("p","François Kerforn"),makeElement("p","Sound and design works")],s=makeVanisher(l,makeElement("div",{id:"info"}),{tMin:900,tMax:1200}),c=CONTENT.projects.map((e=>makeVanisherDisplay(e.name.split(""),makeElement("h2",{className:"projectName"},e.name),{tMin:600,tMax:1400,random:!0}))),d=CONTENT.projects.map((e=>makeVanisher([makeElement("div","Open project"),makeElement("div",{className:"line"}),makeElement("div","+")],makeElement("a",{href:e.href,className:"projectLink",target:"_blank",alt:`Open project : ${e.name}`}),{tMin:650,tMax:900}))),p=makeIcon(makeElement("a",{href:"/",className:"logo",alt:"Works | François Kerforn"}),"M13 13L13 1L0.999999 0.999999M13.5 17L0.999998 17M0.999998 29L7 23L13 29",{width:"32",height:"64",viewBox:"0 0 16 32",fill:"none"}),m=["arrowLeft","arrowRight"].map((e=>makeIcon(makeElement("button",{id:e}),"M8.29289 4.29289C7.90237 4.68342 7.90237 5.31658 8.29289 5.70711L14.5823 11.9965L8.29289 18.2859C7.90237 18.6764 7.90237 19.3096 8.29289 19.7001C8.68342 20.0906 9.31658 20.0906 9.70711 19.7001L16.3461 12.6838C16.711 12.2982 16.711 11.6948 16.3461 11.3092L9.70711 4.29289C9.31658 3.90237 8.68342 3.90237 8.29289 4.29289Z",{width:"24",height:"24",viewBox:"0 0 24 24"}))),u=CONTENT.projects.map((e=>makeVanisher(makeElement("span",e.idObject.type),makeElement("p",{className:"typeTag"}),{tMin:300,tMax:900}))),h=makeVanisher(makeElement("span",CONTENT.about.name),makeElement("h3")),E=makeVanisher(makeElement("span","Clients"),makeElement("h3")),y=makeVanisher(CONTENT.about.description.match(/(.{1,40}\s+)/g).map((e=>makeElement("span",e))),makeElement("p",{id:"aboutDescription"}),{tMin:500,tMax:1500}),k=makeVanisher(CONTENT.about.clients.sort().map((e=>makeElement("span",e))),makeElement("p",{id:"aboutClients"}),{tMin:500,tMax:1500}),T=[makeElement("a",{href:`mailto:${CONTENT.about.contact.mail}`,target:"_blank",alt:"Send e-mail"},""),makeElement("a",{href:CONTENT.about.contact.linkedin,target:"_blank",alt:"Open Linkedin Profile"},"")],C=[makeIcon(makeElement("span",{id:"contactIcon"}),"M10 10L1.28461 7.09487C1.19344 7.06448 1.19343 6.93552 1.2846 6.90513L18.8103 1.06325C18.8884 1.03719 18.9628 1.11156 18.9368 1.18974L13.0949 18.7154C13.0645 18.8066 12.9355 18.8066 12.9051 18.7154L10 10ZM10 10L18.3571 1.64286",{width:"20",height:"20",viewBox:"0 0 20 20"}),makeIcon(makeElement("span",{id:"contactIcon"}),["M1.5 7.6V18.4C1.5 18.4552 1.54477 18.5 1.6 18.5H5.4C5.45523 18.5 5.5 18.4552 5.5 18.4V7.6C5.5 7.54477 5.45523 7.5 5.4 7.5H1.6C1.54477 7.5 1.5 7.54477 1.5 7.6Z","M11.4 7.5H7.6C7.54477 7.5 7.5 7.54477 7.5 7.6V18.4C7.5 18.4552 7.54477 18.5 7.6 18.5H11.4C11.4552 18.5 11.5 18.4552 11.5 18.4V11.5C11.5003 10.1955 14.5028 10.1992 14.5 11.5V18.4C14.5 18.4552 14.5448 18.5 14.6 18.5L18.4 18.5C18.4552 18.5 18.5 18.4552 18.5 18.4V10C18.5154 7.21012 13.5986 6.84636 11.9779 8.58347C11.8952 8.6721 11.5 8.57401 11.5 8.4528V7.6C11.5 7.54477 11.4552 7.5 11.4 7.5Z","M2 5C2.82843 5.82843 4.17157 5.82843 5 5C5.82843 4.17157 5.82843 2.82843 5 2C4.17157 1.17157 2.82843 1.17157 2 2C1.17157 2.82843 1.17157 4.17157 2 5Z"],{width:"20",height:"20",viewBox:"0 0 20 20"})],f=makeElement("div",{id:"contactLinksContainer"});T.forEach(((e,t)=>{e.appendChild(C[t]),f.appendChild(e)}));const v=makeVanisher(f,makeElement("div",{id:"contact"})),g=CONTENT.projects.map((e=>{const t=makeElement("article",{className:"projectContent"}),n=makeElement("p",{className:"projectDescription"},e.description);if(t.appendChild(n),e.url){const n=makeElement("a",{href:e.url,className:"projectContentLinks",target:"_blank"},"Learn More ↗ ");t.appendChild(n)}return{el:t,display:e=>t.classList.toggle("display",e)}})),b=(e,t)=>{const n=makeElement("p"),a=makeElement("span",e),i=makeElement("span",t);return n.appendChild(a),n.appendChild(i),n};CONTENT.projects.map((e=>{const t=makeElement("div",{className:"projectInfo"});return[b("Date",e.idObject.date),b("Role",e.idObject.role)].forEach((e=>t.appendChild(e))),t})).map(((e,t)=>g[t].el.insertBefore(e,g[t].el.childNodes[0])));const w=makeVanisher([makeElement("div","×"),makeElement("div",{className:"line"}),makeElement("div","Other Works")],makeElement("a",{href:"/",className:"backLink",alt:"Works | François Kerforn"}),{tMin:650,tMax:900}),N=(()=>{const e=makeElement("div",{id:"carousel"});return e.appendChild(m[0]),CONTENT.projects.map((t=>{e.appendChild(makeElement("div",{className:"line"}))})),e.appendChild(m[1]),{el:e,lines:Array.from(e.querySelectorAll(".line"))}})();e.updates=new Map([["meta",({title:e,description:t})=>{document.querySelector('meta[name="title"]').setAttribute("content",e),document.querySelector('meta[name="description"]').setAttribute("content",t)}],["docTitle",e=>document.title=e],["displayFooter",e=>{!1===e?oe.vanish():oe.appear()}],["displayHint",e=>{!1===e?n?.vanish():n?.appear()}],["scroll",e=>{window.scrollTo(0,0),document.body.style.overflow=!1===e?"hidden":"auto"}],["displayArrows",e=>{!1===e?m.forEach((e=>(e.style.opacity="0",e.style.pointerEvents="none"))):m.forEach((e=>(e.style.opacity="1",e.style.pointerEvents="all")))}],["aboutLinkWrapper",e=>{!1===e?i.vanish():i.appear("BOTTOM")}],["aboutBackWrapper",e=>{!1===e?o.vanish("BOTTOM"):o.appear()}],["displayInfo",e=>{!1===e?s.vanish():s.appear()}],["displayProjectLink",e=>!0===e?d[t.currentId]?.appear():d[t.currentId]?.vanish("BOTTOM")],["project",e=>{if(-1===e)return g[t.currentId]?.display(!1),void w.vanish();g[t.currentId]?.display(!1),g[e]?.display(!0),w.vanish(),w.appear("BOTTOM"),L(e)}],["displayType",e=>!0===e?u[t.currentId]?.appear():u[t.currentId]?.vanish()],["animateDisplay",e=>{-1!==e?(1===e&&-1!==t.currentId&&([c,u].map((e=>e[t.currentId].vanish("LEFT"))),setTimeout((()=>{c.map((e=>requestAnimationFrame((()=>e.el.classList.remove("abstract"))))),[c,u].map((e=>e[t.currentId].appear("LEFT")))}),150)),2===e&&-1!==t.currentId&&([c,u].map((e=>e[t.currentId].vanish("LEFT"))),setTimeout((()=>{c.map((e=>requestAnimationFrame((()=>e.el.classList.add("abstract"))))),c[t.currentId].appear("LEFT")}),150))):[c,u].map((e=>e[t.currentId]?.vanish("LEFT")))}],["aboutContent",e=>{[h,y,E,k,v].forEach((t=>e?t.appear():t.vanish()))}],["displayCarousel",e=>(N.el.style.opacity=e?"1":"0",N.el.classList.toggle("fadeIn",e))],["audio",e=>{-1===e?Q.style.visibility="hidden":setTimeout((()=>Q.style.visibility="visible"),500),W(e)}],["touchSurface",e=>O.classList.toggle("disabled",!e)]]),e.update=(t,n)=>{try{e.updates.get(t)(n)}catch(e){}},e.render=(()=>{let t={};return n=>{const a=n??{},i=Object.keys(a).filter((e=>t[e]!==a[e]));0!==i.length&&(i.map((t=>e.update(t,a[t]))),t=a)}})(),e.views=new Map([["/",{meta:{title:CONTENT.works.meta.title,description:CONTENT.works.meta.description},docTitle:CONTENT.works.meta.title,scroll:!1,displayFooter:!1,displayHint:!0,displayArrows:!1,aboutLinkWrapper:!0,aboutBackWrapper:!1,displayInfo:!0,displayProjectLink:!0,displayType:!0,animateDisplay:1,aboutContent:!1,project:-1,displayCarousel:!0,audio:-1,touchSurface:!0}],["/about",{meta:{title:CONTENT.about.meta.title,description:CONTENT.about.meta.description},docTitle:CONTENT.about.meta.title,scroll:!0,displayFooter:!0,displayHint:!1,displayArrows:!1,aboutLinkWrapper:!1,aboutBackWrapper:!0,displayInfo:!1,animateDisplay:-1,displayProjectLink:!1,displayType:!1,aboutContent:!0,project:-1,displayCarousel:!1,audio:-1,touchSurface:!1}],...CONTENT.projects.map(((e,t)=>[e.href,{meta:{title:`${e.name} | François Kerforn`,description:e.meta.description},docTitle:`${e.name} | François Kerforn`,scroll:!0,displayFooter:!1,displayHint:!1,displayArrows:!0,aboutLinkWrapper:!0,aboutBackWrapper:!1,displayInfo:!0,displayProjectLink:!1,project:t,displayType:!1,animateDisplay:2,aboutContent:!1,displayCarousel:!0,audio:e.audio,touchSurface:!1}]))]),e.route=t=>{const n=e.views.get(t),a=window.location.origin+t;e.render(n),history.pushState(n,a,a)},[a,r,...[...d,w].map((e=>e.el))].map((t=>t.onclick=()=>{const n=t.href.substring(window.location.origin.length);return e.route(n),!1}));const L=(e=>{let a,i;return(r=-1)=>{const[o,l]=(n=>{const a=t.currentId;if("PREVIOUS"===n)return[a-1<0?e-1:a-1,"LEFT"];if("NEXT"===n)return[a+1>=e?0:a+1,"RIGHT"];if("number"==typeof n){let a=n>t.currentId?"RIGHT":"LEFT";return 0===n&&t.currentId===e-1&&(a="RIGHT"),n===e-1&&0===t.currentId&&(a="LEFT"),[n,a]}})(r);t.currentId!==o&&([c,u,d].map((e=>e[t.currentId]?.vanish("LEFT"===l?"RIGHT":"LEFT"))),[c].map((e=>e[o]?.appear(l))),N.lines[t.currentId]?.classList.remove("active"),N.lines[o]?.classList.add("active"),CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)||(clearTimeout(a),clearTimeout(i),a=setTimeout((()=>"/"===window.location.pathname&&u[t.currentId]?.appear(l)),500),i=setTimeout((()=>"/"===window.location.pathname&&d[t.currentId]?.appear(l)),500)),t.currentId=o,n&&"/"===window.location.pathname&&-1!==t.currentId&&(ne.removeChild(n.el),n=null))}})(CONTENT.projects.length);document.addEventListener("keydown",(e=>{"/"===window.location.pathname&&("ArrowLeft"===e.key&&L("PREVIOUS"),"ArrowRight"===e.key&&L("NEXT"))})),window.addEventListener("wheel",(()=>{let e=!1;return t=>{"/"===window.location.pathname&&(e||(window.requestAnimationFrame((()=>{const n=Math.sign(t.deltaY);-1===n&&L("PREVIOUS"),1===n&&L("NEXT"),e=!1})),e=!0))}})());const O=makeElement("span",{id:"touchSurface"}),[M,I]=(e=>{let t=0;const n=n=>{let a;"mousemove"===n.type&&(a=n.clientX),"touchmove"===n.type&&(a=n.touches[0].clientX);const i=a-t;Math.abs(i)>80&&(i<0&&e("NEXT"),i>0&&e("PREVIOUS"),t=a)};return window.addEventListener("mouseup",(()=>O.removeEventListener("mousemove",n))),[e=>{"mousedown"===e.type&&(t=e.clientX,O.addEventListener("mousemove",n)),"touchstart"===e.type&&(t=e.touches[0].clientX)},n]})(L);O.addEventListener("mousedown",M),O.addEventListener("touchstart",M),O.addEventListener("touchmove",I),document.addEventListener("keyup",(()=>{let n=!1;return a=>{if(!0===n)return;n=!0;const i=CONTENT.projects.length;if("ArrowDown"===a.key&&-1!==t.currentId&&"/"===window.location.pathname&&e.route(CONTENT.projects[t.currentId].href),"ArrowUp"===a.key&&CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)&&e.route("/"),"ArrowLeft"===a.key&&CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)){const t=history.state.project-1<0?i-1:history.state.project-1;e.route(CONTENT.projects[t].href)}if("ArrowRight"===a.key&&CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)){const t=history.state.project+1>=i?0:history.state.project+1;e.route(CONTENT.projects[t].href)}setTimeout((()=>n=!1),300)}})()),m.forEach((()=>{let t=!1;return(n,a)=>n.addEventListener("click",(()=>{if(!0===t)return;t=!0;const n=CONTENT.projects.length;if(0===a&&CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)){const t=history.state.project-1<0?n-1:history.state.project-1;e.route(CONTENT.projects[t].href)}if(1===a&&CONTENT.projects.map((e=>e.href)).includes(window.location.pathname)){const t=history.state.project+1>=n?0:history.state.project+1;e.route(CONTENT.projects[t].href)}setTimeout((()=>t=!1),300)}))})());const j=(e,t,n)=>(1-n)*e+n*t,A=e=>{const t=e,n=t.getContext("2d");return{fill:e=>{n.fillStyle=e},stroke:e=>{n.strokeStyle=e},rgbStr:function(e,t,n,a){return`rgba(${e},${t},${n},${a||1})`},strokeWidth:e=>{0===e&&(e=1e-4),n.lineWidth=e},rectangle:(e,t,a,i)=>{n.fillRect(e,t,a,i)},fix_dpi:()=>{const{width:e,height:n}=t.getBoundingClientRect();t.width=e*devicePixelRatio|0,t.height=n*devicePixelRatio|0},fix_size:()=>{const{width:e,height:n}=t.getBoundingClientRect();t.width=e,t.height=n}}};function S(e){return getComputedStyle(document.documentElement).getPropertyValue(e)}function x(e,t){document.documentElement.style.setProperty(e,t)}const F=+S("--maxColorSet");let P=S("--1primary"),R=S("--1background"),V=S("--1special");const B=(()=>{let e=0;return t=>{e=e>=F?0:e+1,P=S(`--${e}primary`),R=S(`--${e}background`),V=S(`--${e}special`),x("--primary",P),x("--background",R),x("--special",V),$.classList.toggle("up",1===e),setTimeout((()=>{Y(history.state?.project,Q.width),Z.draw()}),0)}})(),$=makeElement("button",{id:"colorButton"});$.onclick=B,B();let{playlist:D,audioCtx:q,play:W,getLastPlaying:G,isPaused:H,fade:X,gainNode:_,storeLastPlaying:K}=(()=>{const e=Object.values(CONTENT.projects).map((e=>e.audio)),t=e.map((e=>Object.assign(document.createElement("audio"),{src:-1!==e?`./media/media${e}.mp3`:"",volume:1,autoplay:!1}))),n=t.map(((t,n)=>{if(-1!==e[n])return new Promise(((e,n)=>{t.addEventListener("canplaythrough",e)}))})).filter((e=>e));Promise.all(n).then((()=>document.getElementById("labelMute").classList.add("enabled")));const a=new AudioContext,i=t.map((e=>a.createMediaElementSource(e))),r=a.createGain();i.forEach((e=>e.connect(r))),r.gain.setValueAtTime(1,a.currentTime),r.connect(a.destination);let o=null;const l=e=>e[o],s=e=>e.every((e=>e.paused)),c=(()=>{let e=null;return t=>{if(clearTimeout(e),t=t<=.5?0:1,r.gain.cancelScheduledValues(a.currentTime),r.gain.setTargetAtTime(t,a.currentTime,.15),0===t)return new Promise(((t,n)=>{e=setTimeout(t,500)}))}})();const d=function(n){if(Z.amp(!0),Y(n,Q.width),-1===n||-1===e[n])return l(t)?.pause(),void Z.amp(!1);s(t)?!U.checked&&t[n]?.play():s(t)||(l(t)?.pause(),t[n]?.play())};return{playlist:t,audioCtx:a,play:d,getLastPlaying:l,isPaused:s,fade:c,gainNode:r,storeLastPlaying:e=>o=e}})();const{labelMute:z,checkbox:U,anim:Z}=function(){const e=(e,t,n)=>{const a=e;let i=0;return e=0,{incPhase:e=>n+=e,getMaxAmp:()=>a,getNewAmp:t=>Math.min(j(i,Math.max(e+t,0),.7),a),storeLastAmp:()=>i=e,setAmp:t=>e=t,fourier:a=>Math.sin(n+2*Math.PI*a/t)*e}};function t(){i.fix_size(),i.strokeWidth(0),i.fill(P);for(let e=0;e<4*a.width;e+=.25){let t=0;t+=l[0].fourier(e),i.rectangle(e,t+a.height/2,2,2);let n=0;n+=l[1].fourier(e),i.rectangle(e,n+a.height/2,2,2);let r=0;r+=l[2].fourier(e),i.rectangle(e,r+a.height/2,2,2)}}const n=(()=>{let e,n;function a(){l[0].incPhase(.015),l[1].incPhase(.01125),l[2].incPhase(.0105),t()}return{start:()=>{e&&clearInterval(e),e=setInterval((()=>requestAnimationFrame(a)),20)},stop:()=>{e&&clearInterval(e)},amp:e=>{n&&clearInterval(n),n=setInterval((()=>requestAnimationFrame((()=>function(e){const a=[l[0].getNewAmp(1.4*e*.91),l[1].getNewAmp(1.82*e*.91),l[2].getNewAmp(.66*e*.91)];l.forEach(((e,t)=>e.storeLastAmp())),l.forEach(((e,t)=>e.setAmp(a[t]))),t(),a[0]>=l[0].getMaxAmp()&&a[1]>=l[1].getMaxAmp()&&a[2]>=l[2].getMaxAmp()&&clearInterval(n),a[0]<=1e-5&&a[1]<=1e-5&&a[2]<=1e-5&&clearInterval(n)}(e?1:-1)))),20)},draw:t}})(),a=makeElement("canvas",{id:"cnv"}),i=A(a),r=makeElement("label",{id:"labelMute"}),o=makeElement("input",{type:"checkbox",id:"mute",name:"mute",checked:!0});o.classList.toggle("muted",o.checked),r.appendChild(o),r.appendChild(a);let l=[e(9,52,Math.PI+1),e(14,49,Math.PI),e(8,49,Math.PI-.4)];return{labelMute:r,checkbox:o,anim:n}}(),Y=(()=>{let e,t=-1;return(n,a)=>{let i=0;e&&clearInterval(e);const r=void 0!==n?D[n]:null;e=setInterval((()=>requestAnimationFrame((()=>{2500===i&&(clearInterval(e),i=0);const n=r?.currentTime||0,o=r?.duration||1,l=Math.min(j(t,Math.trunc(a/o*n),.07),a);J(l),t=l,i+=20}))),20)}})(),J=e=>{ee.fix_size(),ee.fill("rgba(0,0,0,0)"),ee.rectangle(0,0,innerWidth,innerHeight),ee.fill(V),ee.rectangle(0,0,e,innerHeight)},Q=makeElement("canvas",{id:"progress"}),ee=A(Q);D.forEach(((e,t)=>{e.addEventListener("play",(()=>{Z.start(),K(t)})),e.addEventListener("pause",(e=>{H(D)&&Z.stop()})),e.onerror=()=>{H(D)&&Z.stop()},e.onended=()=>{H(D)&&Z.stop()},e.addEventListener("timeupdate",(()=>Y(history.state.project,Q.width)))}));U.addEventListener("change",(e=>{["interrupted","suspended"].includes(q.state)&&q.resume();const[t,n]=[H(D),!U.checked];t||n||G(D)?.pause(),t&&n&&-1!==history.state.audio&&D[history.state.project]?.play(),!t&&n&&G(D)?.play(),e.target.classList.toggle("muted",U.checked)})),document.addEventListener("keyup",(e=>{" "===e.key&&U.click()}));[makeElement("meta",{name:"robots",content:"index, follow"}),makeElement("meta",{name:"title",content:CONTENT.works.meta.title}),makeElement("meta",{name:"description",content:CONTENT.works.meta.title})].forEach((e=>document.head.appendChild(e)));const te=makeElement("header"),ne=makeElement("main"),ae=makeElement("h1","François Kerforn | Portfolio"),ie=makeElement("nav"),re=new Date,oe=makeVanisher(makeElement("p",`${re.getFullYear()} © François Kerforn. All rights reserved`),makeElement("footer"),{tMin:1400});document.body.appendChild(te),document.body.appendChild(ne),document.body.appendChild(oe.el),te.appendChild(ae),te.appendChild(ie),ie.appendChild(p),ie.appendChild(i.el),ie.appendChild(o.el),d.forEach((e=>{const t=makeElement("div",{className:"projectLinkContainer"});t.appendChild(e.el),ie.appendChild(t)}));const le=makeElement("div",{className:"backLinkContainer"});le.appendChild(w.el),ie.appendChild(le),oe.el.appendChild(s.el);const se=makeElement("section",{className:"about"});ne.appendChild(se);const ce=makeElement("h2",{id:"aboutTitle"},"About");se.appendChild(ce),se.appendChild(h.el),se.appendChild(y.el),se.appendChild(E.el),se.appendChild(k.el),se.appendChild(v.el),CONTENT.projects.forEach(((e,t)=>{const n=makeElement("section",{className:"project"});ne.appendChild(n),n.appendChild(c[t].el),n.appendChild(u[t].el),n.appendChild(g[t].el),n.appendChild(D[t])})),ne.appendChild(n.el),ne.appendChild(N.el),ne.appendChild($);const de=makeElement("div",{id:"muteContainer"});ne.appendChild(O),de.appendChild(z),ne.appendChild(de),ne.appendChild(Q)};App(),window.addEventListener("popstate",(e=>App.render(e.state))),App.route(window.location.pathname);